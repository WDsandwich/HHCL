OnLeaveStoreBottom
{
	"\f[height,15]\f[color,#FFD700]\q[ é›¢é–‹å•†åº—â¥ ,OnLeaveStore]"
}
Menu_STORE
{
	storepage=(0,0)
	StoreMode=0
	DressingPage[1]=2
	poke_history_open=0
	Store
	--
	if StoreMode==0	;{ Menu_STORE.MenuTalk0 ; StoreMode=1 }
	else ; Menu_STORE.MenuTalk1
}
Hotkey_STORE
{
	if storepage==(0,0) ; Menu_STORE
	else ; OnLeaveStore
}
//=============å•†åº—é¦–é å°è©±=============
Menu_STORE.MenuTalk0 : nonoverlap
{
	"\p[3]%SFX('sfx\door chime1')\w9\![quicksession,false]"
	--
	"\s[311000]\![sound,play,voice/store/click_01.mp3]å‘¦ï¼Œå±€é•·æ˜¯ä¾†çœ‹æˆ‘çš„å—ï¼Ÿä¹Ÿå¯ä»¥é †ä¾¿çœ‹çœ‹æ–°åˆ°çš„è²¨ç‰©å“¦ã€‚"
	"\s[311000]\![sound,play,voice/store/click_04.mp3]ã€Œè²·ï¼ã€ä¸€å€‹å­—ï¼Œç°¡å–®ã€ç—›å¿«ã€ç€Ÿç‘ï¼ŒçœŸæ˜¯å¤©åº•ä¸‹æœ€æµªæ¼«çš„è©±å•Šï¼\w5\n%(you)èªªå°å§ï¼Œ%(username)ï¼Ÿ"
}
Menu_STORE.MenuTalk1 : nonoverlap
{
	"\p[3]\![quicksession,false]\s[311000]"
	--
	_eg=0
	foreach event_goods ; _i { _eg += TOINT(_i) }
	if storepage==(4,0) && _eg==0
	{	"å“‡â€¦â€¦ \w3æœˆä¾›å•†å“å·²ç¶“éŠ·å”®ä¸€ç©ºå•¦ï¼\w9\n[130]æ„Ÿè¬%(username)å°æœ¬åº—çš„æ”¯æŒï¼" }
	elseif storepage==(4,0) && month==2 ; Menu_STORE.MenuTalk4
	else ; Menu_STORE.MenuTalk2
}
Menu_STORE.MenuTalk2 : nonoverlap
{
	"\s[311000]\![sound,play,voice/store/click_02.mp3]ç®¡ç†åº«å­˜çœŸçš„å¾ˆç´¯äººæ¬¸ï¼ï¼ \w9%(username)è¦ä¸è¦é¸é»è²¨ç‰©ï¼Œæ¸›è¼•ä¸€ä¸‹æˆ‘çš„å·¥ä½œé‡ï¼Ÿ"
	"\s[311000]\![sound,play,voice/store/click_03.mp3]å’³å’³ï¼Œç­‰ç­‰ï¼Œè®“æˆ‘å–å£æ°´ã€‚"	
	"\s[311000]\![sound,play,voice/store/click_06.mp3]æ²’äº‹çš„è©±ï¼Œä¾†èŠèŠå¤©å§ï¼Œ%(username)ï¼Ÿ\n\w9æœ‰ä»€éº¼æˆ‘ä¸çŸ¥é“çš„æ–°å…«å¦å—ï¼Ÿ"	
	"\s[311000]å–”ï¼Ÿ\w5%(username)é‚„æœ‰è¦è²·çš„æ±è¥¿å—ï¼Ÿ"
	"\s[311000]æ…¢æ…¢é€›ã€\w5æ…¢æ…¢é€›ï¼\w5æœ¬åº—æ‡‰æœ‰ç›¡æœ‰ï¼"
}
Menu_STORE.MenuTalk4 : nonoverlap
{
	"æƒ…äººä½³ç¯€ï¼Œ\w5è¦ä¸è¦è³¼è²·ä¸€äº›ç¦®ç‰©è´ˆèˆ‡ä½³äººå‘¢ï¼Ÿ"
	"æœç„¶é‚„æ˜¯è¦ªæ‰‹åšçš„å·§å…‹åŠ›æ›´å¥½å°å§ï¼Ÿ"
	"ç¾åœ¨ç‰¹åˆ¥ç‚º%(username)ä¸Šæ¶äº†è¡¨ç™½ç¥å™¨å“¦ï¼"
	"æ„›\w1æƒ…\w1çš„\w1é‚±\w1æ¯”\w1ç‰¹\w1å‘€\w2ï½\w2ï½\w5 è«‹çœ·é¡§%(username)çš„æˆ€æƒ…å§ï¼"
}
//==============================================================
//---------------------------å•†åº—ä¸»é ---------------------------
//==============================================================
Store
{
	"\p[4]\s[-1]\b[42]\![set,choicetimeout,0]\![quicksession,true]"
	--
	click
	--
	if storepage==(0,0)		//-----é¦–é 
	{
		"\n[250]\f[height,18]\f[bold,1]/
		\_l[50]\f[color,223,158,62]ğŸ‘š\f[color,default]\__q[OnStore.ChangePage,1,0] æœè£åˆ†å€ \__q\n[233]/
		\_l[50]\f[color,223,158,62]ğŸ¬\f[color,default]\__q[OnStore.ChangePage,2,0] é›œè²¨å€ \__q\n[233]/
		\_l[50]\f[color,223,158,62]ğŸ\f[color,default]\__q[OnStore.ChangePage,3,0] ç¦®å“æŠ½çå€ \__q\n[233]/
		\_l[50]\f[color,223,158,62]âœ¡ï¸\f[color,default]\__q[OnStore.ChangePage,4,0] æ´»å‹• \__q\n[233]/
		\_l[50]\f[color,127,179,230]ğŸ’°\f[color,default]\__q[OnStore.ChangePage,99,0] è²©å”®ç‰©å“ \__q\f[default]"
		--
		"\_l[10,320]\f[height,12]ç´¯è¨ˆæ¶ˆè²»é¡åº¦ï¼š%ThousandsSeparators(cum_cost_discoin[0]+cum_cost_discoin[1]+cum_cost_discoin[2])"
		--
		"\_l[80,350]\f[default]%(OnLeaveStoreBottom)\![quicksession,false]"
	}
	elseif storepage==(1,0)		//-----æœè£åˆ†å€
	{
		"\f[align,center]\f[color,#000000]\f[bold,1]\f[height,20]\f[shadowcolor,#FFFFFF]â–ª\f[color,#DBB700]\f[shadowcolor,#000000]  %(_sectionname)æœè£åˆ†å€ \f[color,#000000]\f[shadowcolor,#FFFFFF] â–ª\f[default]\n[150]/
		\f[height,12]\f[color,#F0E68C]â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\f[bold,0]\f[default]/
		\f[align,center]\f[bold,1]\f[color,#000000]\f[shadowcolor,#FFFFB9]/
		\n[253]å–®å“\n[1]\_l[70,70]\__q[OnStore.ChangePage,1,1]%STimg('title')\__q/
		\n[340]\f[align,center]å¥—è£\n[1]\_l[70,130]\__q[OnStore.ChangePage,1,2]%STimg('title')\__q/
		\n[340]\f[align,center]cosplay\n[1]\_l[70,190]\__q[OnStore.ChangePage,1,3]%STimg('title')\__q"
		--
		"\f[default]\_l[7,350]\f[height,15]\f[color,#FFD700]\q[ ï¹¤æ¡è³¼éƒ¨ ,OnStore.ChangePage,0,0]\_l[150]%(OnLeaveStoreBottom)"
		
	}
	//========================================================================
	//--------------------------------æœè£åˆ†å€--------------------------------
	//========================================================================
	elseif storepage[0]==1 && storepage[1]>=1
	{
		"\f[align,center]\f[bold,1]\f[color,#000000]\f[shadowcolor,#FFFFB9]â–ª "
		--
		case storepage[1]
		{  when 1 ; "å–®å“"
		   when 2 ; "å¥—è£"
		   when 3 ; "cosplay"
		}
		--
		case DressingPage[0]
		{
			when 0
			{
				outfit_box=outfit_box_HC
				hair_box=hair_box_HC
				clothes_box=clothes_box_HC
			}
			when 1
			{
				outfit_box=outfit_box_HL
				hair_box=hair_box_HL
				clothes_box=clothes_box_HL
			}
		}
		if DressingPage[1]==1 ; clothes_box=hair_box
		if storepage[1]>=2	  ; clothes_box=outfit_box
		_item="" ; _item2=""
		--
		" â–ª\_l[70,-1]%STimg('title')\n[160]/
		\f[height,15]\f[shadowcolor,#FFFFFF]\_l[-,35]\__q[OnStore.ChangePage,1,0]<è¿”å›\__q"
		--
		case storepage[1]
		{
			//å–®å“-æ¨™ç±¤é 
			when 1
			{
				"\n[1]/
				\_l[65,30]\__q[OnChangeSCType,2]%STimg('type02')\__q\_l[110]\__q[OnChangeSCType,3]%STimg('type03')\__q\_l[155]"
				--
				case DressingPage[0]
				{
					when 0
					{
						"\__q[OnChangeSCType,4]%STimg('type04_0')\__q"
					}
					when 1
					{
						"\__q[OnChangeSCType,4]%STimg('type04_1')\__q"
					}
				}
				--
				"\n[140]/
				\_l[5]\__q[OnChangeSCType,5]%STimg('type05')\__q\_l[50]\__q[OnChangeSCType,6]%STimg('type06')\__q\_l[95]\__q[OnChangeSCType,7]%STimg('type07')\__q\_l[140]\__q[OnChangeSCType,8]%STimg('type08')\__q\n[140]/
				\_l[5]\__q[OnChangeSCType,9]%STimg('type09')\__q\_l[50]\__q[OnChangeSCType,10]%STimg('type10')\__q\_l[95]\__q[OnChangeSCType,11]%STimg('type11')\__q\_l[140]\__q[OnChangeSCType,12]%STimg('type12')\__q\n[1]/
				\_l[203,10]\__q[OnLeaveStore,æ›´è¡£å®¤]%STimg('dressingroom')\__q\_l[190,70]"
				--
				case DressingPage[0]
				{  when 0 ; "\__q[STChangeHL]%STimg('HC_60px')\__q"
				   when 1 ; "\__q[STChangeHC]%STimg('HL_60px')\__q"
				}
				--
				"\n[70]%(STdiscoin)\n[130]"
			}
		  //å¥—è£-æ¨™ç±¤é 
			when 2
			{
				"\_l[100,30]"
				--
				case DressingPage[0]
				{
					when 0 ; "\__q[STChangeHL]%STimg('HC_40px')\__q"
					when 1 ; "\__q[STChangeHC]%STimg('HL_40px')\__q"
				}
				--
				"\_l[203]\__q[OnLeaveStore,æ›´è¡£å®¤]%STimg('dressingroom')\__q\n[10]/
				%(STdiscoin)\n[120]"
			}
		  //cosplay-æ¨™ç±¤é 
		  when 3
			{
				"    %(STdiscoin)\_l[203,10]\__q[OnLeaveStore,æ›´è¡£å®¤]%STimg('dressingroom')\__q\n[30]"
			}
		}
		--
		"\_l[-9]%STimg('line')\n[-80]/
		\_l[-9]%STimg('field')\n[-99]\f[default]\f[height,12]"
		--
		case storepage[1]
		{  //å–®å“-å•†å“
			when 1
			{
				"\_l[20]æœè£\_l[100]æŸ“è‰²\_l[195]åƒ¹æ ¼\n[150]"
				--
				store_merchandise=FENUM("img\dressing\icon\%(DressingPage[0])\%(DressingPage[1])")
				_item2+="\n[20]"
				_drc=DressingPage[0]
				_ob=Char_Code[_drc]
				//é¡¯ç¤ºå¯è³¼è²·å–®å“
				for _i=1 ; _i<ARRAYSIZE(store_merchandise) ; _i++
				{
					_file=store_merchandise[_i]
					_code=SUBSTR(store_merchandise[_i],0,6)
					_pic="dressing\icon\%(DressingPage[0])\%(DressingPage[1])\%(_file)"
					_price=SCprice(_i)
					_file_a=_file
					SETDELIM(_file_a,"_")
					//	æ˜¯å¦æ“æœ‰SCRç‰ˆæœ¬
					_dye="" ; _dye_pic=""
					if "_scr." _in_ _file
					{	
						_dye=_file_a[2]
						SETDELIM(_dye,".")
						for _d=1 ; _d<ARRAYSIZE(_dye) ; _d++
						{			
							_dye_pic+="\_b[img\dressing\button\color%(_dye[_d]).png,inline,--option=use_self_alpha]"
						}
						
					}
					else
						_dye_pic=Bimg("dressing\button\color_none.png")
					--
					if "_p" _in_ _file || "_c" _in_ _file || "_int" _in_ _file || "_d" _in_ _file || "_initial" _in_ _file || "_int" _in_ _file || _code _in_ TOSTR(clothes_box)
						_item+=""
					else
					{
						_item+="\n[30]\_l[4]%Bimg(_pic)\n[40]/
						\_l[100]%(_dye_pic)\n[1]\f[align,right]%ThousandsSeparators(_price)\n[-210]/
						\_l[-1]\__q[OnBuyingClothes,%(_file),%(_i),%(_price),%(_code),%(_ob)]%STimg('square')\__q\n[20]"
					}
					--
					//é¡¯ç¤ºå·²è³¼è²·å–®å“
					if "_p" _in_ _file || "_c" _in_ _file || "_int" _in_ _file || "_d" _in_ _file || "_initial" _in_ _file || "_int" _in_ _file
						_item2+=""
					elseif _code _in_ TOSTR(clothes_box)
					{
						_item2+="\n[30]\_l[4]%Bimg(_pic)\n[40]/
						\_l[100]%(_dye_pic)\n[1]\f[align,right]%ThousandsSeparators(_price)\n[-210]/
						\_l[-1]%STimg('square_x')\n[20]"
					}
				}
			}
		  //å¥—è£-å•†å“
		  when 2
			{
				"\_l[20]é è¦½\_l[150]æœè£æ•¸\_l[210]åƒ¹æ ¼\n[150]"
				--
				_item=""
				store_merchandise=FENUM("img\store\package%(DressingPage[0])")
				_drc=DressingPage[0]
				_ob=Char_Code[_drc]
				for _i=1 ; _i<ARRAYSIZE(store_merchandise) ; _i++
				{
					_file = store_merchandise[_i]
					_file_a = _file
					SETDELIM(_file_a,".")
					_outfit=SUBSTR(_file_a[1],0,6)
					_qty=_file_a[2]
					_price=SCprice(_qty,_i)
					_pic=Bimg("store\package%(DressingPage[0])\%(_file)")
					if _outfit !_in_ TOSTR(clothes_box)
					{	_item+="\_l[-7]%(_pic)\n[35]/
						\_l[165]%(_qty)\n[1]\f[align,right]%ThousandsSeparators(_price)\n[-110]/
						\_l[-10]\__q[OnBuyingClothes,%(_file),%(_i),%(_price),%(_outfit),%(_ob)]%STimg('square2')\__q\n[30]"
					}
					if _outfit _in_ TOSTR(clothes_box)
					{	_item+="\_l[-7]%(_pic)\n[35]/
						\_l[165]%(_qty)\n[1]\f[align,right]%ThousandsSeparators(_price)\n[-110]/
						\_l[-10]%STimg('square2_x')\n[30]"
					}
				}
			}
		  //cosplay-å•†å“
		  when 3
			{
				"\_l[20]æœè£\_l[145]é©ç”¨å°è±¡\_l[210]åƒ¹æ ¼\n[170]"
				--
				store_merchandise=FENUM("img\store\cosplay_icon")
				
				for _i=1 ; _i<ARRAYSIZE(store_merchandise) ; _i++
				{
					_file=store_merchandise[_i]
					_pic=Bimg("store\cosplay_icon\%(_file)")
					_file_a=_file
					SETDELIM(_file_a,".")
					_ob=_file_a[1]
					_outfit=_file_a[2]
					_name=_file_a[3]
					_char_pic=Bimg("store\%(_ob)_3.png")
					_price=SCprice(_i)
					if _ob=="HC" ; clothes_box=outfit_box_HC
					if _ob=="HL" ; clothes_box=outfit_box_HL
					if _outfit _in_ TOSTR(clothes_box)
					{
						_item2+="\_l[-7]%(_pic)\n[17]/
						\_l[140]%(_char_pic)\n[30]/
						\_l[40]%(_name)\n[1]\f[align,right]%ThousandsSeparators(_price)\n[-120]/
						\_l[-10]%STimg('square3_x')\n[50]"
					}
					else
					{
						_item+="\_l[-7]%(_pic)\n[17]/
						\_l[140]%(_char_pic)\n[30]/
						\_l[40]%(_name)\n[1]\f[align,right]%ThousandsSeparators(_price)\n[-120]/
						\_l[-10]\__q[OnBuyingClothes,%(_file),%(_i),%(_price),%(_outfit),%(_ob)]%STimg('square3')\__q\n[50]"
					}
				}
			}
		}
		--
		_item
		--
		_item2
		--
		"\f[default]\_l[-9]%STimg('line')\n[-30]/
		\_l[7]\f[height,15]\f[color,#FFD700]\q[ ï¹¤æ¡è³¼éƒ¨ ,OnStore.ChangePage,0,0]\_l[150]%(OnLeaveStoreBottom)/
		\n[50] "
	}
	
	//========================================================================
	//---------------------------------æˆ³æˆ³æ¨‚---------------------------------
	//========================================================================
	elseif storepage==(3,0)
	{
		"\_l[10,12]%PokeImg('box')\_l[14,16]%PokeImg(poke_pic[0])\_l[68]%PokeImg(poke_pic[1])\_l[122]%PokeImg(poke_pic[2])\_l[176]%PokeImg(poke_pic[3])/
		\_l[14,70]%PokeImg(poke_pic[4])\_l[68]%PokeImg(poke_pic[5])\_l[122]%PokeImg(poke_pic[5])\_l[176]%PokeImg(poke_pic[7])/
		\_l[14,124]%PokeImg(poke_pic[8])\_l[68]%PokeImg(poke_pic[9])\_l[122]%PokeImg(poke_pic[10])/
		\_l[176]%PokeImg(poke_pic[11])/
		\_l[14,178]%PokeImg(poke_pic[12])\_l[68]%PokeImg(poke_pic[13])\_l[122]%PokeImg(poke_pic[14])\_l[176]%PokeImg(poke_pic[15])"
		--
		
		"\_l[14,16]%PokeIcon(0)\_l[68]%PokeIcon(1)\_l[122]%PokeIcon(2)\_l[176]%PokeIcon(3)/
		\_l[14,70]%PokeIcon(4)\_l[68]%PokeIcon(5)\_l[122]%PokeIcon(6)\_l[176]%PokeIcon(7)/
		\_l[14,124]%PokeIcon(8)\_l[68]%PokeIcon(9)\_l[122]%PokeIcon(10)		\_l[176]%PokeIcon(11)/
		\_l[14,178]%PokeIcon(12)\_l[68]%PokeIcon(13)\_l[122]%PokeIcon(14)\_l[176]%PokeIcon(15)\n\_l[15,250]"
		--
		_a=ASEARCHEX("poked",poked)
		_p=ARRAYSIZE(_a)
		--
		if _p<16
		{	"å‰©é¤˜ï¼š%(16-_p)\_l[125]ï¼ˆä¸€æ ¼%(poke_price[0])å…ƒï¼‰\n[150]/
			\f[align,right]\f[height,12]æŒæœ‰æŠ½çåˆ¸Ã— %(lottery_ticket)    "
		}
		else ; "\f[align,center]\f[color,#FFD700]\__q[PokingLottery.Newbox]ã€é–‹ä¸€ç›’æ–°çš„ï¼ˆ%(poke_price[1])ï¼‰ã€‘\__q\f[color,default]"
		--
		"\n\_l[20,300]\f[height,12]\__q[OnPokingLottery.History.OnC,"
		--
		if poke_history_open==1 ; "0][ é—œé–‰ "
		else ; "1][ é–‹å•Ÿ "
		--
		"æ­·å²ç´€éŒ„ ]\__q\n\_l[-,300]\f[align,right]%(STdiscoin)"
		--
		"\f[default]\_l[-9,333]%STimg('line')\n[-30]/
		\_l[7]\f[height,15]\f[color,#FFD700]\q[ ï¹¤æ¡è³¼éƒ¨ ,OnStore.ChangePage,0,0]\_l[150]%(OnLeaveStoreBottom)"
	}
	//========================================================================
	//---------------------------------é›œè²¨å€---------------------------------
	//========================================================================
	elseif storepage==(2,0)
	{
		_txt="%STimg('title')\_l[23]\f[color,#171717]\f[bold,1]\f[shadowcolor,none]â–ª ç‰¹ä¾› â–ª\f[default]\_l[110]< 1500 %ItemImg('Discoin')ç‹„æ–¯å¹£ >\n[170]\__q[OnStore.BuyingGroceries,1,1]\_l[10]%STimg('square4')\__q\_l[37]%STimg('commodity\energydrink_18px') èƒ½é‡é£²æ–™\n[150]/
		%STimg('title')\_l[8]\f[color,#171717]\f[bold,1]\f[shadowcolor,none]â–ª å¼·åŒ–ææ–™ â–ª\f[default]\_l[120]< 100 %ItemImg('hypercube_15px')ç•°æ–¹æ™¶ >\n[20]"
		--
		_enhpic=("enhancement_0_18px","enhancement_1_18px","enhancement_2_18px")
		for _i=0 ; _i<3 ; _i++
		{
			_txt+="\n[150]\__q[OnStore.BuyingGroceries,2,%(_i)]\_l[10]%STimg('square4')\__q\_l[37]%ItemImg(_enhpic[_i]) %(enhancement_name[_i])"
		}
		_txt+="\n[150]%STimg('title')\_l[23]\f[color,#171717]\f[bold,1]\f[shadowcolor,none]â–ª æŸ“åŠ‘ â–ª\f[default]\_l[120]< 500 %ItemImg('hypercube_15px')ç•°æ–¹æ™¶ >\n[150]"
		for _i=0 ; _i< ARRAYSIZE (dye_name) ; _i++
		{
			if _i==3 || _i==8 ; _txt+="\n[30]\f[align,center]"
			elseif _i==5 || _i==10 ; _txt+="\n[130]\f[align,center]"
			elseif _i>=1 ; _txt+="ï½œ"
			_txt+="\__q[OnStore.BuyingGroceries,3,%(_i)]"
			if _i==3 || _i==4 || _i==8 || _i==9
			_txt+="%STimg('square6')"
			else
			_txt+="%STimg('square5')"
			_txt+="\__q"
			//\_b[img\dressing\button\color%(_i).png,inline,--option=use_self_alpha]%(dye_color[_i])%(dye_name[_i])\f[default]
		}
		_s_pot=("\_l[11,185]","\_l[101]","\_l[189]","\n\_l[38,208]","\_l[137]","\n\_l[8,231]","\_l[97]","\_l[185]","\n\_l[38,254]","\_l[137]","\n\_l[8,278]","\_l[97]","\_l[185]")	//,"\_l[]"
		for _i=0 ;  _i< ARRAYSIZE (_s_pot) ; _i++
		{
			_txt+="%(_s_pot[_i])\f[valign,center]\_b[img\dressing\button\color%(_i).png,inline,--option=use_self_alpha]%(dye_color[_i])%(dye_name[_i])\f[default]"
		}
		--
		_txt
		--
		"\n\_l[,310]\f[align,right]\_b[img\items\hypercube_15px.png,inline,--option=use_self_alpha] /
		\f[color,#84C1FF]%ThousandsSeparators(hypercube)    %(STdiscoin)/
		\f[default]\_l[-9,333]%STimg('line')\n[-30]/
		\_l[7]\f[height,15]\f[color,#FFD700]\q[ ï¹¤æ¡è³¼éƒ¨ ,OnStore.ChangePage,0,0]\_l[150]%(OnLeaveStoreBottom)"
	}
	//========================================================================
	//---------------------------------æ´»å‹•---------------------------------
	//========================================================================
	elseif storepage==(4,0)
	{	if "%(year)" !_in_ holiday_celebrated_store[month]
		{	if holiday_celebrated_store[month]=="" ; holiday_celebrated_store[month]="%(year)"
			else ; holiday_celebrated_store[month]+="-%(year)"
			case month
			{	when 2
				{ event_goods_max=(10,1,5) ; event_goods=event_goods_max ; event_goods_prise=(214,0,224) ; event_goods_name=(event_item_name[0],consumable_sp_name[2],gift_sp_name[3]) ; event_pic="items\event_item_0,items\consumable_sp_2,items\gift_sp_3"
				}
				when 3
				{ event_goods_max=(1,5) ; event_goods=event_goods_max ; event_goods_prise=(301,301) ; event_goods_name=(event_item_name[1],gift_sp_name[4]+"ï¼ˆé€ç¦®ç”¨ï¼‰") ; event_pic="items\event_item_1,items\gift_sp_4"
				}
				when 4
				{ event_goods_max=(4) ; event_goods=event_goods_max ; event_goods_prise=(100) ; event_goods_name=(gift_sp_name[5]) ; event_pic="items\gift_sp_5"
				}
				when 5
				{ event_goods_max=(10) ; event_goods=event_goods_max ; event_goods_prise=(520) ; event_goods_name=(gift_sp_name[6]) ; event_pic="items\gift_sp_6"
				}
				when 6
				{ event_goods_max=(6) ; event_goods=event_goods_max ; event_goods_prise=(30) ; event_goods_name=(gift_sp_name[7]) ; event_pic="items\gift_sp_7"
				}
			}
		}
		--
		"\f[align,center]\f[color,#C6A300]\f[shadowcolor,none]\f[bold,1]â—† %(month)æœˆçš„ç‰¹ä¾›å•†å“ â—†\f[default]\n%STimg('line')\n[-30]"
		--
		_goods="\f[height,12]"
		for _i=0 ; _i<ARRAYSIZE(event_goods_name) ; _i++
		{	
			_pic=event_pic[_i]
			_goods+="\n[30]\f[align,left]\_l[4]%Bimg(_pic)\n[40]\_l[70]%(event_goods_name[_i]) [ "
			if event_goods[_i]>0 ; _goods+="å‰©é¤˜\f[color,#82F3F3]%(event_goods[_i])\f[color,default]"
			else ; _goods+="å·²å”®ç½„"
			_goods+=" ]\n[150]\f[align,right]\f[bold,1]\f[color,#FFDC35]%(event_goods_prise[_i])\f[color,default]å…ƒ\f[bold,0]"
			_goods+="\n[-350]\_l[-1]"
			if event_goods[_i]>0 ; _goods+="\__q[OnBuyingEventGoods,%(_i),%(event_goods_name[_i])]%STimg('square')\__q"
			else ; _goods+="%STimg('square_x')"
			_goods+="\n[20]"
		}
		_goods
		--
		"\n\_l[,310]\f[align,right]\_b[img\items\hypercube_15px.png,inline,--option=use_self_alpha] /
		\f[color,#84C1FF]%ThousandsSeparators(hypercube)    %(STdiscoin)/
		\f[default]\_l[-9,333]%STimg('line')\n[-30]/
		\_l[7]\f[height,15]\f[color,#FFD700]\q[ ï¹¤æ¡è³¼éƒ¨ ,OnStore.ChangePage,0,0]\_l[150]%(OnLeaveStoreBottom)"
	}
	//========================================================================
	//--------------------------------è²©è³£ç‰©å“--------------------------------
	//========================================================================
	elseif storepage==(99,0)
	{
		"%STimg('title')\_l[8]\f[color,#171717]\f[bold,1]\f[shadowcolor,none]â–ª è®Šè³£å»¢æ–™ â–ª\f[default]\n[150]/
		\__q[OnSellItem,1,1] â”” æ›æˆ %ItemImg('Discoin') ç‹„æ–¯å¹£ï¼ˆ1ï¼š1ï¼‰ \__q\n[150]/
		\__q[OnSellItem,1,2] â”” æ›æˆ %ItemImg('hypercube_15px') ç•°æ–¹æ™¶ï¼ˆ100ï¼š1ï¼‰ \__q\n[200]/
		%STimg('title')\_l[15]\f[color,#171717]\f[bold,1]\f[shadowcolor,none]â–ª æˆ°åˆ©å“ â–ª\f[default]\n[150]/
		\__q[OnSellItem,2,0] â”” è³£å‡ºæ‰€æœ‰æˆ°åˆ©å“ \__q\n[150]/
		\__q[OnSellItem,2,1] â”” è³£å‡ºæ‰€æœ‰æˆ°åˆ©å“ï¼ˆåŒ…æ‹¬é–å®šç‰©å“ï¼‰\__q\n[200]/
		%STimg('title')\_l[8]\f[color,#171717]\f[bold,1]\f[shadowcolor,none]â–ª æŸ“æ–™åŸç¤¦ â–ª\f[default]\n[150]/
		\__q[OnSellItem,3,0] â”” è³£å‡ºæ‰€æœ‰åŸç¤¦ \__q\n[150]/
		\__q[OnSellItem,3,1] â”” è³£å‡ºæ‰€æœ‰åŸç¤¦ï¼ˆåŒ…æ‹¬é–å®šç‰©å“ï¼‰ \__q\n[150]"
		--
		"\n\_l[,310]\f[align,right]%ItemImg('hypercube_15px') /
		\f[color,#84C1FF]%ThousandsSeparators(hypercube)    %(STdiscoin)/
		\f[default]\_l[-9,333]%STimg('line')\n[-30]/
		\_l[7]\f[height,15]\f[color,#FFD700]\q[ ï¹¤æ¡è³¼éƒ¨ ,OnStore.ChangePage,0,0]\_l[150]%(OnLeaveStoreBottom)"
	}
}

//=============è½‰æ›åˆ†é =============
OnStore.ChangePage
{
	storepage=reference
	--
	Store
}


//======================================================================
//---------------------------æœè£åˆ†å€ç›¸é—œäº‹ä»¶---------------------------
//======================================================================
OnChangeSCType
{
	_type=reference0
	DressingPage[1]=_type
	Store
}
STChangeHL
{
	DressingPage[0]=1
	Store
}
STChangeHC
{
	DressingPage[0]=0
	Store
}

BalloonTooltip_STChangeHL { "åˆ‡æ›åˆ° æµ·æ‹‰" }
BalloonTooltip_STChangeHC { "åˆ‡æ›åˆ° èµ«å¡è’‚" }

//======================è³¼è²·æœè£äº‹ä»¶======================
OnBuyingClothes
{
	_file=reference0
	_i=reference1
	_price=reference2
	_cloth=reference3
	_ob=reference4
	_ask=reference5
	_pic=""
	
	_file_a=_file
	SETDELIM(_file_a,".")
	
	
	--
	if _ask=='sure'
	{
		//-----å®šç¾©ç²å–æœè£
		if	   storepage[1]==2 ; _cloth=ST.ClothPack.Package[_i]
		elseif storepage[1]==3 ; _cloth=ST.ClothPack.Cosplay[_i]
		_cloth=REPLACE(_cloth,"|",",")
		//-----æœ€çµ‚æŒ‡æ´¾
		case _ob
		{
			when "HC" ; clothes_box_HC,=_cloth
			when "HL" ; clothes_box_HL,=_cloth
		}
		--
		//-----ç²å–å¥—è£
		if	   _ob=="HC" && storepage[1]==2
			outfit_box_HC,=_file_a[1]
		elseif DressingPage[0]==1 && storepage[1]==2
			outfit_box_HL,=REPLACE(_file_a[1],"+",",")
		elseif _ob=="HC" && storepage[1]==3
			outfit_box_HC,=_file_a[2]
		elseif _ob=="HL" && storepage[1]==3
			outfit_box_HL,=_file_a[2]
		--
		discoin-=_price
		cum_cost_discoin[0]+=_price
		--
		Store
		--
		Store.Trade.End
	}
	elseif _ask=='cancel'
	{
		Store
		--
		"\p[3]\![quicksession,false]"
		--
		"\s[311000]æ…¢æ…¢çœ‹å“¦ï¼"
		"\s[311000]ä¸è‘—æ€¥ã€\w5ä¸è‘—æ€¥ï¼"
	}
	else
	{
		case storepage[1]
		{	when 1
			_pic=Bimg("dressing\icon\%(DressingPage[0])\%(DressingPage[1])\%(_file)")
			when 2 ; _pic=Bimg("store\package%(DressingPage[0])\%(_file)")
			when 3 ; _pic=Bimg("store\cosplay\%(_file)")	
		}
		if "omit" _in_ _file
			_pic=Bimg("store\package%(DressingPage[0])_full\%(_file)")
		--
		if discoin>=_price
		{
			"\p[7]\s[-1]\b[50]\![quicksession,true]\_l[236,-25]\__q[Store]%QTYimg('x')\__q"
			--
			case storepage[1]
			{	when 1 ; "\n[260]%(_pic)   "
				when 2 ; "\n[200]"
				when 3 ; "\n[200]"
			}
			--
			"\f[align,center]ç¢ºå®šèŠ±è²»\f[color,185,159,40]%ThousandsSeparators(_price)\f[default]è³¼è²·å—ï¼Ÿ"
			--
			_pic2=Bimg("store\package%(DressingPage[0])\%(_file)")
			if "omit" _in_ _file
				_pic2=Bimg("store\package%(DressingPage[0])_full\%(_file)")
			case storepage[1]
			{	when 1 ; "\n[270]\_l[111,60]"
				when 2 ; "\n[130]%(_pic)\n[170]"
				when 3 ; "\n[130]%(_pic)\n[170]"
			}
			--
			"\__q[OnBuyingClothes,%(_file),%(_i),%(_price),%(_cloth),%(_ob),sure]\_b[img\O.png,inline]\__q         /
			\__q[OnBuyingClothes,%(_file),%(_i),%(_price),%(_cloth),%(_ob),cancel]\_b[img\X.png,inline]\__q"
		}
		else
			"\p[3]\![quicksession,false]å”‰å‘€ï¼Œæ‚¨èº«ä¸Šçš„ç‹„æ–¯å¹£å¥½åƒä¸å¤ å‘¢ï¼"
	}
}



//======================================================================
//----------------------------æˆ³æˆ³æ¨‚ç›¸é—œäº‹ä»¶----------------------------
//======================================================================
PokeIcon
{	_n=_argv[0]
	--
	if poked[_n]=="" ; "\__q[OnPokingLottery.Poke,%(_n)]%PokeImg('frame')\__q"
	else ; PokeImg(poked[_n])
}
PokeImg
{	"\_b[img\poking lottery\%(_argv[0]).png,inline,--option=use_self_alpha]"	}
poke_price
{	(1000,2500)	}
poke_prize_list
{
	(gift_name,consumable_name,enhancement_name)
}
//æˆ³ï¼
OnPokingLottery.Poke
{
	if discoin<poke_price[0] ; Store.NotEnoughDiscoin
	else
	{
		_n=reference0
		poked[_n]="poked"
		_s=ANY("interface1","interface2","interface3")
		if lottery_ticket>=1 ; lottery_ticket--
		else
		{	discoin-=poke_price[0]
			cum_cost_discoin[1]+=TOINT(poke_price[0])
		}
		//	å¯«å…¥æŠ½çç´€éŒ„
		_prize=ANY(poke_prize_list)
		if "æŠ½çç´€éŒ„" !_in_ poke_history ; poke_history=poke_history_default
		if "%(year).%(month).%(day)" !_in_ poke_history ; poke_history+="\n[150]\f[color,#E6C614]-----%(year).%(month).%(day)-----\f[default]"
		poke_history+="\n[111]\f[height,12]  %(_prize)\f[default]"
		//	å¯¦éš›ç²å¾—
		_x=ASEARCH(_prize,gift_sp_name) 	; gift_sp[_x]++
		_x=ASEARCH(_prize,gift_name) 		; { gift[_x]=TOINT(gift[_x]) ; gift[_x]++ }
		_x=ASEARCH(_prize,consumable_name)
		{ consumable[_x]=TOINT(consumable[_x]) ; consumable[_x]++ }
		_x=ASEARCH(_prize,enhancement_name) ; enhancement[_x]++
		--
		"\![sound,play,sound/effect/%(_s).mp3]"
		--
		"\p[7]\s[-1]\b[44]\![quicksession,true]\_l[-,30]\f[align,center]\f[height,12]\f[bold,1]æŠ½åˆ°äº†\f[default]\n[111]ã€\f[color,#FFFFFF]\f[shadowcolor,#726209] %(_prize) \f[default]ã€‘ï¼"
	}
	--
	if poke_history_open==1 ; PokingLottery.History
	click_sound=0
	--
	Store
}
PokingLottery.Newbox
{
	poked=("","")
	poke_pic=(0,0)
	_a="A" ; _b=60
	for _i=0 ; _i<16 ; _i++
	{
		_c=RAND(_b)
		poke_pic[_i]=_a+"_"+_c
	}
	discoin-=poke_price[1]
	cum_cost_discoin[1]+=TOINT(poke_price[1])
	--
	Store.Trade.End
	--
	if poke_history_open==1 ; PokingLottery.History
	--
	Store
}
PokingLottery.History
{
	if "æŠ½çç´€éŒ„" !_in_ poke_history ; poke_history=poke_history_default
	--
	"\p[8]\s[-1]\b[42]%(poke_history)"
	--
	if poke_history==poke_history_default ; ""
	else
	"\n\_l[150]\f[height,12]\f[color,#BEBEBE]\__q[OnPokingLottery.History.OnC,2][ æ¸…ç©ºæ­·å²ç´€éŒ„ ]\__q"
}
OnPokingLottery.History.OnC
{
	if reference0==2 ; poke_history=poke_history_default
	else ;  poke_history_open=reference0
	--
	if poke_history_open==1 ; PokingLottery.History
	--
	Store
}
poke_history_default
{
	"\![quicksession,true]\f[shadowcolor,#726209]\f[bold,1]\![*]æŠ½çç´€éŒ„\![*]\f[default]/
	\_l[150]\f[height,12]\f[color,#BEBEBE]\__q[OnPokingLottery.History.OnC,2][ æ¸…ç©ºæ­·å²ç´€éŒ„ ]\__q\f[default]"
}



//========================================================================
//-----------------------------é›œè²¨å€ç›¸é—œäº‹ä»¶-----------------------------
//========================================================================
OnStore.BuyingGroceries
{
	_tag=reference0 ; _item=reference1
	
	if reference2=="sure"
	{	case _tag
		{	when 1
			{	consumable[0]++ ; discoin-=1500
				cum_cost_discoin[2]=TOINT(cum_cost_discoin[2]) ; cum_cost_discoin[2]+=1500 
			}
			when 2 ; { enhancement[_item]++ ; hypercube-=100 ; cum_cost_hypercube[0]+=100 }
			when 3 ; { dye[_item]++ ; hypercube-=500 ; cum_cost_hypercube[1]+=500 }
		}
		--
		Store
		--
		Store.Trade.End
	}
	else
	{
		if _tag==1 && discoin-1500<0 ; Store.NotEnoughDiscoin
		elseif (_tag==2 && hypercube<100) || (_tag==3 && hypercube<500)
		{
			Store
			--
			"\p[3]\s[311000]\![quicksession,false]å”‰å‘€â€¦â€¦ï¼æ‚¨çš„ç•°æ–¹æ™¶ä¸å¤ å‘¢ï¼"
		}
		else
		{	
			Store
			--
			"\p[7]\s[-1]\b[44]\![quicksession,true]\_l[10,20]"
			--
			_enhpic=("enhancement_0","enhancement_1","enhancement_2")
			_dyepic=(0,0)
			for _i=0 ; _i<13 ; _i++
			{
				_dyepic[_i]="powder dye_"+_i
			}
			case _tag
			{
				when 1 ; "%STimg('commodity\energydrink')\_l[66]\f[shadowcolor,#B19C3E]ç¢ºå®šèŠ±è²»1,500\n\_l[66,40]ç‹„æ–¯å¹£"
				when 2 ; "%ItemImg(_enhpic[_item])\_l[66]\f[shadowcolor,#B19C3E]ç¢ºå®šèŠ±è²»100\n\_l[66,40]ç•°æ–¹æ™¶"
				when 3 ; "%ItemImg(_dyepic[_item])\_l[66]\f[shadowcolor,#B19C3E]ç¢ºå®šèŠ±è²»500\n\_l[66,40]ç•°æ–¹æ™¶"
			}
			--
			"è³¼è²·å—ï¼Ÿ\n\_l[75,73]\__q[OnStore.BuyingGroceries,%(_tag),%(_item),sure]%STimg('O')\__q      /
				\__q[Store]%STimg('X')\__q"
			
		}
	}
}
//========================================================================
//-----------------------------æ´»å‹•å•†å“äº‹ä»¶-----------------------------
//========================================================================
OnBuyingEventGoods
{
	_num  = reference0
	_name = reference1
	//æ”¾å…¥å€‰åº«
	if month==2 && _num==0
	{	event_item[0]= TOINT (event_item[0]) ; event_item[0]++ }
	elseif month==2 && _num==1
	{	consumable_sp[2]= TOINT (consumable_sp[2]) ; consumable_sp[2]+=6 }
	elseif month==2 && _num==2
	{	gift_sp[3]= TOINT (gift_sp[3]) ; gift_sp[3]++ }
	elseif month==3 && _num==0
	{	event_item[1]= TOINT (event_item[1]) ; event_item[1]++ }
	elseif month==3 && _num==1
	{	gift_sp[4]= TOINT (gift_sp[4]) ; gift_sp[4]++ }
	elseif month==4 && _num==0
	{	gift_sp[5]= TOINT (gift_sp[5]) ; gift_sp[5]++ }
	elseif month==5 && _num==0
	{	gift_sp[6]= TOINT (gift_sp[6]) ; gift_sp[6]++ }
	elseif month==6 && _num==0
	{	gift_sp[7]= TOINT (gift_sp[7]) ; gift_sp[7]++ }
	--
	//æ¸›å°‘åº«å­˜
	event_goods[_num]-=1
	--
	//çµå¸³
	cum_cost_discoin[3]=TOINT(cum_cost_discoin[3]) ; cum_cost_discoin[3]+=event_goods_prise[_n]
	discoin-=event_goods_prise[_n]
	--
	Store
	--
	//ç‰¹æ®Šå°è©±
	if month==2 && _num==0
	{	"\p[3]\s[311000]\![quicksession,false]"
		--
		OnBuyingEventGoods.Talk.200
	}
	elseif month==2 && _num==1
		"%cp(0)\b[22]\![quicksession,false]\n[70]â€¦\w2â€¦\w3â€¦\w2â€¦\w5\n[150]â€¦â€¦ç‚ºä»€éº¼å¤œé¶¯é€æˆ‘çš„æ±è¥¿åœ¨å¦³é€™è£¡ï¼Ÿ\w9\w5\p[3]\s[311000]å•Šå“ˆå“ˆâ€¦â€¦  \w6åˆ¥ã€\w3åˆ¥èª¤æœƒå•Šï¼\w6æ˜¯å¤œé¶¯å°å§è¦æˆ‘è½‰äº¤çµ¦%(username)%(you)çš„ï¼\w9\n[130]%(you)çœ‹ï¼Œæˆ‘ä¸ä¹Ÿæ²’æ”¶%(you)éŒ¢å—ï¼\w9\w5%cp(0)\b[20]\c\n[70]å—¯å“¼â€¦â€¦"
	elseif month==2 && _num==2
	{	"\p[3]\s[311000]\![quicksession,false]"
		--
		OnBuyingEventGoods.Talk.202
	}
	elseif month==5 && _num==0
	{	"\p[3]\s[311000]\![quicksession,false]"
		--
		OnBuyingEventGoods.Talk.500
	}
	elseif month==6 && _num==0
	{	"\p[3]\s[311000]\![quicksession,false]"
		--
		OnBuyingEventGoods.Talk.600
	}
	else ; Store.Trade.End
}
OnBuyingEventGoods.Talk.200 : nonoverlap
{	"å“¼å“¼â€¦â€¦ \w3%(username)æœ‰æƒ³è´ˆèˆ‡çš„å°è±¡å—ï¼Ÿ"
	{ "ç¥ç¦%(username)åº¦éä¸€å€‹æµªæ¼«çš„æƒ…äººç¯€å“¦ï¼"
	  --
	  if day>14 ; "\w7 â€¦â€¦å·²ç¶“æ™šäº†å•Šã€‚"
	}
	"å“‡ï¼\w3æ˜¯å“ªä½å¹¸é‹çš„å¥³å£«èƒ½æ”¶åˆ°%(username)çš„å·§å…‹åŠ›å‘¢ï¼Ÿ"
	"é¼“èµ·å‹‡æ°£å»è¡¨ç™½å§ï¼"
}
OnBuyingEventGoods.Talk.202 : nonoverlap
{	"å‹æƒ…æç¤ºï¼š\w5é€™æ˜¯é£Ÿç‰©æ¨¡å‹ï¼"
	"å•Šï¼Œ\w3%(username)ï¼Œ\w5é€™ä¸èƒ½åƒå“¦ã€‚"
	"åšå¾—å¾ˆåƒå°å§ï¼Ÿ"
	"%(you)ä¸¦éèª¤ä»¥ç‚ºå®ƒæ˜¯è£œçµ¦å“æ‰è²·çš„å§ï¼Ÿ\w8\n[130]ç‰Œå­ä¸Šå¯«å¾—æ¸…æ¸…æ¥šæ¥šâ€¦â€¦\w8 æˆ‘å¯æ²’æœ‰æè©æ¬ºå”·ã€‚"
	"çœ‹èµ·ä¾†ç¾å‘³å»ä¸èƒ½åƒï¼ï¼\w7å°±æ˜¯æ‰€è¬‚çš„ã€Œä¸­çœ‹ä¸ä¸­ç”¨ã€ï¼\w7\n[130]â€¦â€¦â€¦â€¦é€™å€‹ä¸å¥½ç¬‘å•Šï¼Ÿ"
}
OnBuyingEventGoods.Talk.500 : nonoverlap
{
	"å“¦ï¼\w3%(username)ï¼Œ\w5é€™æ˜¯æ‰“ç®—å‘èª°è¡¨ç™½å‘¢ï¼Ÿ"
	"é€™æ˜¯æˆ‘è¦ªæ‰‹åŒ…è£çš„å”·ï¼Œ\w7å¥½çœ‹å—ï¼Ÿ"
	"é€™ç¨®èŠ±åœ¨ç‹„æ–¯åŸå¯ä¸å¥½å–å¾—ï¼Œ\w8è³£å¾—è²´ä¸€é»â€¦â€¦\w5ä¹Ÿæ˜¯å¾ˆåˆç†çš„å§ã€‚"
	"æˆ‘ä½¿ç”¨äº†ç‰¹æ®Šçš„é˜²è…æŠ€è¡“ï¼Œ\w7æ”¾å¾—å†ä¹…éƒ½ä¸æœƒæ¯èå–”ã€‚\w9\n[130]è‡³æ–¼å…·é«”çš„æ–¹æ³•\w2ï¼\w3ï¼\w6é‚£è‡ªç„¶æ˜¯å•†æ¥­æ©Ÿå¯†å•¦ï¼"
}
OnBuyingEventGoods.Talk.600 : nonoverlap
{
	"ç™¾åˆ†ç™¾ç´”èŠ’æœ\w2ï¼\w2ï¼\w5 çœŸçš„å“¦ï¼"
	"é€™å¯æ˜¯ä¾†è‡ªå¤–é‚¦çš„å“ç¨®ï¼"
	"è«‹ç½®æ–¼é™°æ¶¼ä¹¾ç‡¥è™•ï¼Œ\w7é¿å…é™½å…‰ç›´å°„ã€‚"
	"æœ‰åˆ¥æ–¼æ–°é®®çš„èŠ’æœï¼Œ\w7ç¾å‘³å»çµ²æ¯«ä¸æ¸›å‘¢ã€‚"
	"å’¦ï¼Ÿ\w3æ‚¨æ‡·ç–‘æˆ‘æŠŠè³£å‰©çš„æ°´æœåŠ å·¥å¾Œï¼Œ\w7å†æ¬¡æ‹¿å‡ºä¾†è²©å”®å—ï¼Ÿ\w9\n[130]é€™ã€\w3é€™æ€éº¼å¯èƒ½å‘¢\w1â€¦\w2â€¦\w5 å•Šå“ˆå“ˆ\w1â€¦\w2â€¦\w3"
}


//========================================================================
//-----------------------------å”®ç‰©ç›¸é—œäº‹ä»¶-----------------------------
//========================================================================
OnSellItem
{
	_type=reference0 ; _n=reference1
	if reference2=="sure"
	{
		if _type==1 && _n==1
		{
			discoin+=scrap
			cum_gain_discoin[2]=TOINT(cum_gain_discoin[2]) ; cum_gain_discoin[2]+=scrap
			scrap=0
		}
		elseif _type==1 && _n==2
		{
			_a= TOINT (scrap/100)
			hypercube+=_a
			cum_gain_hypercube[0]+=_a
			scrap-=_a*100
		}
		elseif _type==2
		{
			_price=0
			for _i=0 ; _i< ARRAYSIZE (loot_name) ; _i++
			{
				if loot_lock[_i]==1 && _n==0 ; {}
				else ; _price+= TOINT (loot_price[_i]*loot[_i])
			}
			_price = TOINT (_price)
			discoin = TOINT (discoin)
			discoin += _price
			cum_gain_discoin[3]=TOINT(cum_gain_discoin[3]) ; cum_gain_discoin[3] += _price
			if _n==1 ; loot=(0,0)
			else
			{	for _i=0 ; _i<ARRAYSIZE(loot) ; _i++
				{ if loot_lock[_i]==1 ;{}
				  else ; loot[_i]=0
				}
			}
		}
		elseif _type==3
		{
			_price=0
			for _i=0 ; _i< ARRAYSIZE (dye_ingredient_name) ; _i++
			{
				if dye_ingredient_lock[_i]==1 && _n==0 ; {}
				else ; _price+= TOINT (dye_ingredient_price[_i]*dye_ingredient[_i])
			}
			_price = TOINT (_price)
			discoin = TOINT (discoin)
			discoin += _price
			cum_gain_discoin[4]=TOINT(cum_gain_discoin[4]) ; cum_gain_discoin[4] += _price
			if _n==1 ; dye_ingredient=(0,0,0,0,0,0)
			else
			{	for _i=0 ; _i<ARRAYSIZE(dye_ingredient) ; _i++
				{ if dye_ingredient_lock[_i]==1 ;{}
				  else ; dye_ingredient[_i]=0
				}
			}
			
		}
		--
		Store
		--
		Store.Trade.End
	}
	else
	{
		Store
		--
		case _type
		{
			when 1
			{
				if scrap==0 ; "\p[3]\s[311000]\![quicksession,false]%(username)ç¾åœ¨çš„åº«å­˜è£¡ï¼Œæ²’æœ‰ä»»ä½•çš„å»¢æ–™å“¦â€¦â€¦"
				elseif scrap<100 && _n==2
					"\p[3]\s[311000]\![quicksession,false]å•Šï¼Œé€™å€‹è‡³å°‘è¦æœ‰100å€‹å»¢æ–™æ‰èƒ½å…Œæ›å“¦ã€‚"
				else
					{"\p[7]\s[-1]\b[44]\![quicksession,true]\_l[-,10]\f[align,center]\f[color,#FFFFFF]\f[shadowcolor,#0B0A04]\f[bold,1]"
					--
					if _n==1 ; "%(scrap) å»¢æ–™\nâ†“\n%(scrap) %ItemImg('Discoin')ç‹„æ–¯å¹£"
					elseif _n==2 ; "%(scrap) å»¢æ–™\nâ†“\n%(scrap/100) %ItemImg('hypercube_15px')ç•°æ–¹æ™¶"
					--
					"\n\_l[-,73]\f[align,center]\__q[OnSellItem,%(_type),%(_n),sure]%STimg('O')\__q        /
						\__q[Store]%STimg('X')\__q"
				}
			}
			when 2
			{
				_txt="\p[7]\s[-1]\b[42]\![quicksession,true]\![set,autoscroll,disable]/
				\f[align,center]æ˜¯å¦è³£å‡ºä»¥ä¸‹æˆ°åˆ©å“ï¼Œ\nè³ºå– "
				_txt2=""
				_price=0
				--
				for _i ; _i< ARRAYSIZE (loot) ; _i++
				{
					if loot_lock[_i]==1 && _n==0 ; {}
					else
					{
						if loot[_i] >= 1 ; _txt2+="\n[111]%(loot_name[_i])Ã—%(loot[_i])"
						_price+=loot[_i]*loot_price[_i]
					}
				}
				--
				_txt+="\f[color,#DFC968]%(_price) %ItemImg('Discoin')ç‹„æ–¯å¹£\f[default]ï¼Ÿ\n[150]/
				\f[align,center]\__q[OnSellItem,2,%(_n),sure]%STimg('O')\__q        /
					\__q[Store]%STimg('X')\__q\n[150]/
				\_l[-9]%STimg('line')\n[-150]\f[height,12]\f[color,#ADB3B8]\f[align,center]"
				_txt+=_txt2
				--
				if _price==0 ; "\p[3]\s[311000]\![quicksession,false]%(username)æ²’æœ‰å¯ä»¥å‡ºå”®çš„æˆ°åˆ©å“å‘¢â€¦â€¦"
				else ; _txt
			}
			when 3
			{
				_txt="\p[7]\s[-1]\b[42]\![quicksession,true]\![set,autoscroll,disable]/
				\f[align,center]æ˜¯å¦è³£å‡ºä»¥ä¸‹åŸç¤¦ï¼Œ\nè³ºå– "
				_txt2=""
				_price=0
				--
				for _i ; _i< ARRAYSIZE (dye_ingredient) ; _i++
				{
					if dye_ingredient_lock[_i]==1 && _n==0 ; {}
					else
					{
						if dye_ingredient[_i] >= 1
							_txt2+="\f[height,15]\n[130]%(dye_ingredient_name[_i])Ã—%(dye_ingredient[_i])"
						_price+=dye_ingredient[_i]*dye_ingredient_price[_i]
					}
				}
				--
				_txt+="\f[color,#DFC968]%(_price) %ItemImg('Discoin')ç‹„æ–¯å¹£\f[default]ï¼Ÿ\n[150]/
				\f[align,center]\__q[OnSellItem,3,%(_n),sure]%STimg('O')\__q        /
					\__q[Store]%STimg('X')\__q\n[150]/
				\_l[-9]%STimg('line')\n[-150]\f[height,12]\f[color,#ADB3B8]\f[align,center]"
				_txt+=_txt2
				--
				if _price==0 ; _txt="\p[3]\s[311000]\![quicksession,false]%(username)æ²’æœ‰å¯ä»¥å‡ºå”®çš„åŸç¤¦å“¦â€¦â€¦"
				--
				_txt
			}
		}
	}
}
//======================================================================
//------------------------------ç‹„æ–¯å¹£ä¸è¶³------------------------------
//======================================================================
Store.NotEnoughDiscoin
{
	"\p[3]\s[311000]\![quicksession,false]å•Šï¼æ‚¨çš„ç‹„æ–¯å¹£ä¸å¤ å“¦ï¼"
}
Store.Trade.End
{
	"\![sound,play,sound/sfx/kingaku hyouzi.mp3]\p[3]\s[311000]\![quicksession,false]"
	--
	"è¬è¬æƒ é¡§ï¼"
	"å¤šè¬æƒ é¡§ï¼"
	"\![sound,play,voice/store/slide_01.mp3]å•Šâ€¦â€¦ä»¤äººè¿·é†‰çš„å…‰æ¾¤â€¦â€¦"
}

//======================================================================
//---------------------------é›¶é£Ÿåˆ†å€ç›¸é—œäº‹ä»¶---------------------------
//======================================================================
STORE_Snack
{
	visit_store++
	--
	"\p[3]\s[311000]\b[42]\![quicksession,true]\![set,choicetimeout,0]"
	--
	"\_l[15]\f[color,223,158,62]ğŸ¬\f[color,default]\q[ è³¼è²·è‰è“ç³–æœ ,BuyCandy]"
	--
	"\_l[7,350]\f[height,15]\f[color,#FFD700]\q[ ï¹¤æ¡è³¼éƒ¨ ,OnStore.ChangePage,0,0]\_l[150]%(OnLeaveStoreBottom)"
}



BuyCandy{	//è³¼è²·è‰è“ç³–æœ
	"\p[3]\s[311000]ä¸€é¡†è‰è“ç³–æœå”®åƒ¹2500å…ƒï¼Œå®¢å®˜è¦è²·å¤šå°‘å‘¢ï¼Ÿ\![open,inputbox,OnHowMuchDoYouNeed]"
}
OnHowMuchDoYouNeed
{
	OnOrderQuantity_Candy(reference0)
}
OnOrderQuantity_Candy
{
	if reference0==0
		"\p[3]\s[311000]ä¸è²·äº†å—ï¼Ÿ"
	elseif TOINT(FLOOR(reference0))==0
		"\p[3]\s[311000]è«‹è¼¸å…¥æ•¸å­—ï¼\![open,inputbox,OnHowMuchDoYouNeed]"
	elseif discoin<(TOINT(FLOOR(reference0)))*2500
		{"\p[3]\s[311000]ä¸å¥½æ„æ€ï¼Œæ‚¨çš„ç‹„æ–¯å¹£ä¸å¤ å“¦ï¼"
		"\p[3]\s[311000]å”‰å‘€ï¼Œæ‚¨èº«ä¸Šçš„ç‹„æ–¯å¹£å¥½åƒä¸å¤ å‘¢ï¼"
		--
		Store}
	elseif reference0<=10
		{"\p[3]\s[311000]è²·%(reference0)é¡†å°±å¤ äº†å—ï¼Ÿé¦¬ä¸Šä¾†ã€‚\w5\n/
		âƒâƒ\w2âƒâƒâƒ\w3âƒâƒâƒâƒ\w4âƒâƒâƒâƒâƒ \w9\w9"
		--
		BuyCandyEnd}
	elseif reference0<=50
		{"\p[3]\s[311000]%(reference0)é¡†æ˜¯å—ï¼Ÿè«‹ç¨ç­‰â€¦â€¦\w9\n/
		âƒâƒ\w5âƒâƒâƒ\w9âƒâƒâƒâƒ\w4\w9âƒâƒâƒâƒâƒ \w9\w9"
		--
		BuyCandyEnd}
	elseif reference0>50
		{"\p[3]\s[311000]å”‰å‘€ï¼å®¢äººçœŸæ˜¯å¤§æ–¹ï¼é¦¬ä¸Šç‚ºæ‚¨åŒ…è£ï¼\w9\w9\n/
		âƒâƒ\w9âƒâƒâƒ\w9âƒâƒâƒâƒ\w9\w4âƒâƒ\w9âƒâƒâƒ \w9\w9"
		--
		BuyCandyEnd}
	
}

BuyCandyEnd
{
		_cost=(TOINT(FLOOR(reference0)))*2500
		strawberry_candy+=TOINT(FLOOR(reference0))
		discoin-=(TOINT(FLOOR(reference0)))*2500
		"\c\p[3]\s[311000]å·²è³¼è²·\f[color,#FFD700]\f[bold,1]%TOINT(FLOOR(reference0))\f[default]é¡†è‰è“ç³–æœï¼ŒèŠ±è²»äº†\f[color,#FFD700]\f[bold,1]%(_cost)\f[default]ç‹„æ–¯å¹£ã€‚\n/
		æ­¡è¿ä¸‹æ¬¡å†ä¾†å…‰é¡§å“¦ï¼\w9\s[2100]\b[10]\e"
}

//é›¢é–‹å•†åº—
OnLeaveStore
{
	StoreMode=0
	storepage=(0,0)
	--
	"\p[3]\s[311000]\b[0]å’¦ï¼Ÿ\w3å·²ç¶“è¦èµ°äº†å—ï¼Ÿ\w5\n[150]ä¸‹æ¬¡å†å…‰è‡¨å“¦ï¼\w9\w5/
	%SFX('sfx\door chime2')\c\s[-1]\b[-1]"
	--
	if reference0=="æ›´è¡£å®¤"
		DressingRoom
	
}



//=============è³£å‡º=============
SellItem	//å•†åº—è²©å”®ä»‹é¢
{
	
}
SellAllScrap //è³£æ‰æ‰€æœ‰å»¢æ–™
{
	scrapZ=TOINT(FLOOR(scrap))
	_earndiscoin=scrapZ
	if scrapZ<1
		"æ²’æœ‰å¯ä»¥è®Šè³£çš„å»¢æ–™ã€‚"
	elseif scrapZ>=1
		discoin+=scrapZ
		scrap-=scrapZ
		--
		"å·²è³£å‡ºæ‰€æœ‰å»¢æ–™ï¼Œè³ºå¾—\f[color,#FFD700]\f[bold,1]%(_earndiscoin)\f[default]ç‹„æ–¯å¹£ã€‚"
		"è²©è³£å»¢æ–™ç²å¾—äº†\f[color,#FFD700]\f[bold,1]%(_earndiscoin)\f[default]ç‹„æ–¯å¹£ã€‚"
}



//=============æ’å…¥åœ–ç‰‡=============
STimg
{
	_picname=_argv[0]
	_txt="\_b[img\store\"
	_txt+=_picname
	_txt+=".png,inline,--option=use_self_alpha]"
	_txt
}
SGimg
{
	_picname=_argv[0]
	_txt="\_b[img\dressing\icon\"
	_txt+="%(_picname)"
	_txt+=".png,inline,--option=use_self_alpha]"
	_txt
}
STdiscoin
{
	"\_b[img\items\Discoin.png,inline,--option=use_self_alpha]\f[default]\f[color,185,159,40] %ThousandsSeparators(discoin)"
}




